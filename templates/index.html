<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>AC-é£ä¹¦BOTæ§åˆ¶å°</title>
    <!-- ä½¿ç”¨emojiä½œä¸ºfavicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸ¤–</text></svg>" type="image/svg+xml">
    <!-- å¼•å…¥Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- é…ç½®Tailwindä¸»é¢˜ -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                        secondary: '#4f46e5',
                        success: '#10b981',
                        warning: '#f59e0b',
                        danger: '#ef4444',
                        info: '#3b82f6',
                        light: '#f3f4f6',
                        dark: '#1f2937'
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-shadow {
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            }
            .transition-all-300 {
                transition: all 0.3s ease;
            }
            .scale-hover {
                transition: transform 0.2s ease;
            }
            .scale-hover:hover {
                transform: scale(1.02);
            }
        }
    </style>
    <!-- å¼•å…¥è‡ªå®šä¹‰CSS -->
    <link rel="stylesheet" href="/static/css/style.css">
    

</head>
<body class="font-inter bg-gray-50 min-h-screen flex flex-col">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <div class="bg-primary text-white p-2 rounded-lg">
                    <i class="fa fa-paper-plane-o text-xl"></i>
                </div>
                <h1 class="text-xl font-bold text-dark">ğŸ’«AC-é£ä¹¦BOTæ§åˆ¶å°</h1>
            </div>
            <div class="flex items-center space-x-4">
                <div id="live-clock" class="flex items-center text-gray-600 text-sm bg-gray-100 px-3 py-1.5 rounded-lg">
                    <i class="fa fa-clock-o mr-2"></i>
                    <span id="current-time"></span>
                </div>
                <button id="test-connection-btn" class="flex items-center px-4 py-2 bg-info text-white rounded-lg transition-all-300 hover:bg-info/90">
                    <i class="fa fa-bolt mr-2"></i>
                    <span>æµ‹è¯•è¿æ¥</span>
                </button>
                <button id="add-task-btn" class="flex items-center px-4 py-2 bg-primary text-white rounded-lg transition-all-300 hover:bg-primary/90">
                    <i class="fa fa-plus mr-2"></i>
                    <span>æ–°å»ºä»»åŠ¡</span>
                </button>
            </div>
        </div>
    </header>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="flex-grow container mx-auto px-4 py-8">
        <!-- ä»»åŠ¡ç»Ÿè®¡å¡ç‰‡ -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-white rounded-xl p-6 card-shadow scale-hover" id="total-tasks-card">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="text-gray-500 mb-1">æ€»ä»»åŠ¡æ•°</p>
                        <h3 class="text-3xl font-bold text-dark">0</h3>
                    </div>
                    <div class="bg-blue-100 text-primary p-3 rounded-lg">
                        <i class="fa fa-tasks text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 text-sm text-gray-500">
                    <span>åŒ…å«å·²å¯ç”¨å’Œå·²ç¦ç”¨ä»»åŠ¡</span>
                </div>
            </div>
            <div class="bg-white rounded-xl p-6 card-shadow scale-hover" id="enabled-tasks-card">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="text-gray-500 mb-1">å·²å¯ç”¨ä»»åŠ¡</p>
                        <h3 class="text-3xl font-bold text-success">0</h3>
                    </div>
                    <div class="bg-green-100 text-success p-3 rounded-lg">
                        <i class="fa fa-check-circle text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 text-sm text-gray-500">
                    <span>å½“å‰æ´»è·ƒçš„å®šæ—¶ä»»åŠ¡</span>
                </div>
            </div>
            <div class="bg-white rounded-xl p-6 card-shadow scale-hover" id="recent-logs-card">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="text-gray-500 mb-1">æœ€è¿‘æ‰§è¡ŒçŠ¶æ€</p>
                        <h3 class="text-3xl font-bold text-warning" id="recent-status-text">æš‚æ— æ•°æ®</h3>
                    </div>
                    <div class="bg-amber-100 text-warning p-3 rounded-lg">
                        <i class="fa fa-history text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 text-sm text-gray-500">
                    <span id="recent-status-time">--</span>
                </div>
            </div>
        </div>

        <!-- ä»»åŠ¡åˆ—è¡¨ -->
        <div class="bg-white rounded-xl shadow-sm p-6 mb-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold text-dark">ä»»åŠ¡åˆ—è¡¨</h2>
                <div class="flex items-center space-x-2">
                    <input type="text" id="task-search" placeholder="æœç´¢ä»»åŠ¡åç§°..." class="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50">
                    <button id="refresh-tasks-btn" class="p-2 text-gray-500 hover:text-primary transition-all-300">
                        <i class="fa fa-refresh"></i>
                    </button>
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead>
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ä»»åŠ¡åç§°</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ç±»å‹</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ‰§è¡Œæ—¶é—´</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ˜ŸæœŸå‡ </th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">çŠ¶æ€</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">åˆ›å»ºæ—¶é—´</th>
                            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="task-list-body">
                        <!-- ä»»åŠ¡åˆ—è¡¨å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        <tr>
                            <td colspan="7" class="px-6 py-10 text-center text-gray-500">
                                <div class="flex flex-col items-center justify-center">
                                    <i class="fa fa-calendar-check-o text-4xl mb-3 text-gray-300"></i>
                                    <p>æš‚æ— ä»»åŠ¡ï¼Œè¯·ç‚¹å‡»ä¸Šæ–¹"æ–°å»ºä»»åŠ¡"æŒ‰é’®åˆ›å»º</p>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- æœ€è¿‘æ‰§è¡Œæ—¥å¿— -->
        <div class="bg-white rounded-xl shadow-sm p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold text-dark">æœ€è¿‘æ‰§è¡Œæ—¥å¿—</h2>
                <button id="clear-logs-btn" class="text-sm text-danger hover:underline">
                    æ¸…ç©ºæ—¥å¿—
                </button>
            </div>
            
            <div class="overflow-x-auto max-h-80 overflow-y-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead>
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ä»»åŠ¡åç§°</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">çŠ¶æ€</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ¶ˆæ¯</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ‰§è¡Œæ—¶é—´</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="logs-list-body">
                        <!-- æ—¥å¿—åˆ—è¡¨å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        <tr>
                            <td colspan="4" class="px-6 py-10 text-center text-gray-500">
                                <div class="flex flex-col items-center justify-center">
                                    <i class="fa fa-history text-4xl mb-3 text-gray-300"></i>
                                    <p>æš‚æ— æ‰§è¡Œæ—¥å¿—</p>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto px-4 text-center">
            <p>ğŸ¤– AC-bot ğŸ˜</p>
            <p class="text-gray-400 text-sm mt-2">v 1.0.1</p>
        </div>
    </footer>

    <!-- åˆ›å»º/ç¼–è¾‘ä»»åŠ¡æ¨¡æ€æ¡† -->
    <div id="task-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold text-dark" id="modal-title">æ–°å»ºä»»åŠ¡</h3>
                    <button id="close-modal-btn" class="text-gray-400 hover:text-gray-600 transition-all-300">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <form id="task-form">
                    <input type="hidden" id="task-id" value="">
                    
                    <!-- ä»»åŠ¡åç§° -->
                    <div class="mb-4">
                        <label for="task-name" class="block text-sm font-medium text-gray-700 mb-1">ä»»åŠ¡åç§° <span class="text-danger">*</span></label>
                        <input type="text" id="task-name" name="name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="è¯·è¾“å…¥ä»»åŠ¡åç§°" required>
                    </div>
                    
                    <!-- ä»»åŠ¡ç±»å‹ -->
                    <div class="mb-4">
                        <label for="task-type" class="block text-sm font-medium text-gray-700 mb-1">ä»»åŠ¡ç±»å‹ <span class="text-danger">*</span></label>
                        <select id="task-type" name="type" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" required>
                            <option value="">è¯·é€‰æ‹©ä»»åŠ¡ç±»å‹</option>
                            <option value="custom">è‡ªå®šä¹‰æ¶ˆæ¯</option>
                            <option value="ai_news">AIæ–°é—»</option>
                            <option value="llm">å¤§æ¨¡å‹å†…å®¹</option>
                            <option value="gitlab">GitLabäº‹ä»¶</option>
                        </select>
                    </div>
                    
                    <!-- é£ä¹¦Webhook URL -->
                    <div class="mb-4">
                        <label for="webhook-url" class="block text-sm font-medium text-gray-700 mb-1">é£ä¹¦Webhook URL <span class="text-danger">*</span></label>
                        <input type="url" id="webhook-url" name="webhook_url" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="è¯·è¾“å…¥é£ä¹¦Webhook URL" required>
                        <p class="text-xs text-gray-500 mt-1">è¯·åœ¨é£ä¹¦ç¾¤æœºå™¨äººè®¾ç½®ä¸­è·å–Webhookåœ°å€</p>
                    </div>
                    
                    <!-- æ‰§è¡Œæ—¶é—´ -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">æ‰§è¡Œæ—¶é—´ <span class="text-danger">*</span></label>
                        <div class="flex items-center space-x-2">
                            <input type="number" id="task-hour" name="hour" min="0" max="23" class="w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 text-center" placeholder="æ—¶">
                            <span class="text-gray-500">:</span>
                            <input type="number" id="task-minute" name="minute" min="0" max="59" class="w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 text-center" placeholder="åˆ†">
                            <span class="text-gray-500">:</span>
                            <input type="number" id="task-second" name="second" min="0" max="59" class="w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 text-center" placeholder="ç§’">
                        </div>
                        <p class="text-xs text-gray-500 mt-1">è¯·è®¾ç½®ä»»åŠ¡æ‰§è¡Œçš„å…·ä½“æ—¶é—´ï¼ˆ24å°æ—¶åˆ¶ï¼‰</p>
                    </div>
                    
                    <!-- æ‰§è¡Œæ˜ŸæœŸ -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">æ‰§è¡Œæ˜ŸæœŸ</label>
                        <div class="flex flex-wrap gap-2">
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="checkbox" name="days_of_week" value="1" class="form-checkbox h-5 w-5 text-primary rounded">
                                <span class="ml-2 text-sm text-gray-700">å‘¨ä¸€</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="checkbox" name="days_of_week" value="2" class="form-checkbox h-5 w-5 text-primary rounded">
                                <span class="ml-2 text-sm text-gray-700">å‘¨äºŒ</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="checkbox" name="days_of_week" value="3" class="form-checkbox h-5 w-5 text-primary rounded">
                                <span class="ml-2 text-sm text-gray-700">å‘¨ä¸‰</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="checkbox" name="days_of_week" value="4" class="form-checkbox h-5 w-5 text-primary rounded">
                                <span class="ml-2 text-sm text-gray-700">å‘¨å››</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="checkbox" name="days_of_week" value="5" class="form-checkbox h-5 w-5 text-primary rounded">
                                <span class="ml-2 text-sm text-gray-700">å‘¨äº”</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="checkbox" name="days_of_week" value="6" class="form-checkbox h-5 w-5 text-primary rounded">
                                <span class="ml-2 text-sm text-gray-700">å‘¨å…­</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="checkbox" name="days_of_week" value="0" class="form-checkbox h-5 w-5 text-primary rounded">
                                <span class="ml-2 text-sm text-gray-700">å‘¨æ—¥</span>
                            </label>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">ä¸é€‰æ‹©åˆ™è¡¨ç¤ºæ¯å¤©æ‰§è¡Œ</p>
                    </div>
                    
                    <!-- è‡ªå®šä¹‰æ¶ˆæ¯å†…å®¹ï¼ˆæ ¹æ®ä»»åŠ¡ç±»å‹æ˜¾ç¤º/éšè—ï¼‰ -->
                    <div id="custom-content-section" class="mb-4 hidden">
                        <label for="task-content" class="block text-sm font-medium text-gray-700 mb-1">æ¶ˆæ¯å†…å®¹ <span class="text-danger">*</span></label>
                        <textarea id="task-content" name="custom_content" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="è¯·è¾“å…¥è¦æ’­æŠ¥çš„æ¶ˆæ¯å†…å®¹"></textarea>
                    </div>
                    
                    <!-- AIæ–°é—»é…ç½®ï¼ˆæ ¹æ®ä»»åŠ¡ç±»å‹æ˜¾ç¤º/éšè—ï¼‰ -->
                    <div id="ai-news-config-section" class="mb-4 hidden">
                        <div class="mb-3">
                            <label for="ai-news-url" class="block text-sm font-medium text-gray-700 mb-1">60sAPI URL <span class="text-danger">*</span></label>
                            <input type="url" id="ai-news-url" name="ai_news_url" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="å¦‚ï¼šhttp://127.0.0.1:4399/v2/ai-news">
                        </div>
                    </div>
                    
                    <!-- å¤§æ¨¡å‹é…ç½®ï¼ˆæ ¹æ®ä»»åŠ¡ç±»å‹æ˜¾ç¤º/éšè—ï¼‰ -->
                    <div id="llm-config-section" class="mb-4 hidden">
                        <div class="mb-3">
                            <label for="llm-prompt" class="block text-sm font-medium text-gray-700 mb-1">æç¤ºè¯ <span class="text-danger">*</span></label>
                            <textarea id="llm-prompt" name="llm_prompt" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="è¯·è¾“å…¥å¤§æ¨¡å‹æç¤ºè¯"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="llm-model-name" class="block text-sm font-medium text-gray-700 mb-1">æ¨¡å‹åç§°</label>
                            <input type="text" id="llm-model-name" name="llm_model_name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="å¦‚ï¼šdeepseek-chatï¼Œä¸å¡«åˆ™ä½¿ç”¨æ­¤é»˜è®¤å€¼">
                        </div>
                        <div class="mb-3">
                            <label for="llm-api-url" class="block text-sm font-medium text-gray-700 mb-1">API URL <span class="text-danger">*</span></label>
                            <input type="url" id="llm-api-url" name="llm_api_url" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="å¦‚ï¼šhttps://api.deepseek.com"></input>
                        </div>
                        <div class="mb-3">
                            <label for="llm-api-key" class="block text-sm font-medium text-gray-700 mb-1">API Key <span class="text-danger">*</span></label>
                            <input type="password" id="llm-api-key" name="llm_api_key" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="è¯·è¾“å…¥APIå¯†é’¥"></input>
                            <p class="text-xs text-gray-500 mt-1">è¯·ç¡®ä¿APIå¯†é’¥å®‰å…¨ï¼Œç³»ç»Ÿä¸ä¼šæ˜æ–‡å­˜å‚¨</p>
                        </div>
                    </div>

                    <!-- GitLabé…ç½®ï¼ˆæ ¹æ®ä»»åŠ¡ç±»å‹æ˜¾ç¤º/éšè—ï¼‰ -->
                    <div id="gitlab-config-section" class="mb-4 hidden">
                        <div class="mb-3">
                            <label for="gitlab-url" class="block text-sm font-medium text-gray-700 mb-1">GitLabæœåŠ¡å™¨åœ°å€</label>
                            <input type="url" id="gitlab-url" name="gitlab_url" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="å¦‚ï¼šhttps://gitlab.com">
                        </div>
                        <div class="mb-3">
                            <label for="gitlab-project" class="block text-sm font-medium text-gray-700 mb-1">GitLabé¡¹ç›®è·¯å¾„ <span class="text-danger">*</span></label>
                            <input type="text" id="gitlab-project" name="gitlab_project" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="å¦‚ï¼šgroup/project_name">
                            <p class="text-xs text-gray-500 mt-1">é¡¹ç›®å®Œæ•´è·¯å¾„ï¼Œå¦‚ï¼šgroup/project_name</p>
                        </div>
                        <div class="mb-3">
                            <label for="gitlab-token" class="block text-sm font-medium text-gray-700 mb-1">GitLab Webhookå¯†é’¥</label>
                            <input type="password" id="gitlab-token" name="gitlab_token" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="è¯·è¾“å…¥GitLab Webhookå¯†é’¥">
                            <p class="text-xs text-gray-500 mt-1">ç”¨äºéªŒè¯GitLab Webhookè¯·æ±‚çš„ç­¾å</p>
                        </div>
                        <div class="mb-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">äº‹ä»¶ç±»å‹ <span class="text-danger">*</span></label>
                            <div class="grid grid-cols-2 gap-2">
                                <label class="inline-flex items-center cursor-pointer">
                                    <input type="checkbox" name="gitlab_events" value="Push Hook" class="form-checkbox h-5 w-5 text-primary rounded">
                                    <span class="ml-2 text-sm text-gray-700">Pushäº‹ä»¶</span>
                                </label>
                                <label class="inline-flex items-center cursor-pointer">
                                    <input type="checkbox" name="gitlab_events" value="Merge Request Hook" class="form-checkbox h-5 w-5 text-primary rounded">
                                    <span class="ml-2 text-sm text-gray-700">Merge Request</span>
                                </label>
                                <label class="inline-flex items-center cursor-pointer">
                                    <input type="checkbox" name="gitlab_events" value="Issue Hook" class="form-checkbox h-5 w-5 text-primary rounded">
                                    <span class="ml-2 text-sm text-gray-700">Issueäº‹ä»¶</span>
                                </label>
                                <label class="inline-flex items-center cursor-pointer">
                                    <input type="checkbox" name="gitlab_events" value="Pipeline Hook" class="form-checkbox h-5 w-5 text-primary rounded">
                                    <span class="ml-2 text-sm text-gray-700">Pipelineäº‹ä»¶</span>
                                </label>
                                <label class="inline-flex items-center cursor-pointer">
                                    <input type="checkbox" name="gitlab_events" value="Tag Push Hook" class="form-checkbox h-5 w-5 text-primary rounded">
                                    <span class="ml-2 text-sm text-gray-700">Tag Pushäº‹ä»¶</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä»»åŠ¡çŠ¶æ€ -->
                    <div class="mb-6">
                        <label class="inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="task-enabled" name="enabled" class="form-checkbox h-5 w-5 text-primary rounded" checked>
                            <span class="ml-2 text-sm text-gray-700">å¯ç”¨ä»»åŠ¡</span>
                        </label>
                    </div>
                    
                    <!-- æ“ä½œæŒ‰é’® -->
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancel-task-btn" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all-300">
                            å–æ¶ˆ
                        </button>
                        <button type="submit" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-all-300">
                            <i class="fa fa-save mr-1"></i> ä¿å­˜ä»»åŠ¡
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- æµ‹è¯•è¿æ¥æ¨¡æ€æ¡† -->
    <div id="test-connection-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-md">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold text-dark">æµ‹è¯•Webhookè¿æ¥</h3>
                    <button id="close-test-modal-btn" class="text-gray-400 hover:text-gray-600 transition-all-300">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <form id="test-connection-form">
                    <div class="mb-4">
                        <label for="test-webhook-url" class="block text-sm font-medium text-gray-700 mb-1">é£ä¹¦Webhook URL <span class="text-danger">*</span></label>
                        <input type="url" id="test-webhook-url" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="è¯·è¾“å…¥é£ä¹¦Webhook URL" required>
                    </div>
                    
                    <div class="mb-4">
                        <label for="test-message" class="block text-sm font-medium text-gray-700 mb-1">æµ‹è¯•æ¶ˆæ¯</label>
                        <textarea id="test-message" rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ï¼Œç”¨äºéªŒè¯é£ä¹¦webhookè¿æ¥æ˜¯å¦æ­£å¸¸ã€‚" required>è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ï¼Œç”¨äºéªŒè¯é£ä¹¦webhookè¿æ¥æ˜¯å¦æ­£å¸¸ã€‚</textarea>
                    </div>
                    
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancel-test-btn" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all-300">
                            å–æ¶ˆ
                        </button>
                        <button type="submit" class="px-4 py-2 bg-info text-white rounded-lg hover:bg-info/90 transition-all-300">
                            <i class="fa fa-paper-plane mr-1"></i> å‘é€æµ‹è¯•æ¶ˆæ¯
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥è‡ªå®šä¹‰JS -->
    <script src="/static/js/app.js"></script>
    
    <!-- å®æ—¶æ—¶é’Ÿè„šæœ¬ - ç§»åˆ°è¿™é‡Œç¡®ä¿DOMåŠ è½½å®Œæˆåæ‰§è¡Œ -->
    <script>
            // ç­‰å¾…DOMå®Œå…¨åŠ è½½
            document.addEventListener('DOMContentLoaded', function() {
                console.log('DOMå®Œå…¨åŠ è½½ï¼Œå°è¯•åˆå§‹åŒ–æ—¶é’Ÿ...');
                
                // æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
                const timeElement = document.getElementById('current-time');
                const clockElement = document.getElementById('live-clock');
                
                if (timeElement && clockElement) {
                    console.log('æ—¶é’Ÿå…ƒç´ å·²æ‰¾åˆ°ï¼Œå¯ä»¥å¼€å§‹æ›´æ–°æ—¶é’Ÿ');
                    
                    // ç¡®ä¿å…ƒç´ å¯è§
                    clockElement.style.display = 'flex';
                    clockElement.style.visibility = 'visible';
                    
                    // æ›´æ–°æ—¶é’Ÿå‡½æ•°
                    function updateClock() {
                        const now = new Date();
                        const year = now.getFullYear();
                        const month = String(now.getMonth() + 1).padStart(2, '0');
                        const day = String(now.getDate()).padStart(2, '0');
                        const hours = String(now.getHours()).padStart(2, '0');
                        const minutes = String(now.getMinutes()).padStart(2, '0');
                        const seconds = String(now.getSeconds()).padStart(2, '0');
                        
                        const weekdays = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
                        const weekday = weekdays[now.getDay()];
                        
                        const timeString = `${year}-${month}-${day} ${hours}:${minutes}:${seconds} ${weekday}`;
                        timeElement.textContent = timeString;
                    }
                    
                    // ç«‹å³æ›´æ–°ä¸€æ¬¡
                    updateClock();
                    // æ¯ç§’æ›´æ–°ä¸€æ¬¡
                    setInterval(updateClock, 1000);
                } else {
                    console.error('æœªæ‰¾åˆ°æ—¶é’Ÿå…ƒç´ ï¼');
                    console.log('current-timeå…ƒç´ å­˜åœ¨:', !!timeElement);
                    console.log('live-clockå…ƒç´ å­˜åœ¨:', !!clockElement);
                }
            });
        </script>
</body>
</html>